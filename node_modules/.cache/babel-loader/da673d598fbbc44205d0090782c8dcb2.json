{"ast":null,"code":"import Parse from 'parse';\nimport { withState, withHandlers, pipe } from '../../util';\nconst ClouseQuery = Parse.Object.extend('ClouseQuery');\n\nconst init = props => props.filterData;\n\nconst makeMainQuery = props => index => {\n  console.log(props);\n  console.log('makemain query');\n  let mainQuery = new Parse.Query(ClouseQuery);\n\n  if (props.newd.op === 'and') {\n    props.newd.childs.map(item => {\n      if (!item.childs) {\n        mainQuery = Parse.Query.and(mainQuery, item);\n      } else {\n        mainQuery = Parse.Query.and(mainQuery, item.mainQuery);\n      }\n    });\n  } else {\n    props.newd.childs.map(item => {\n      if (!item.childs) {\n        mainQuery = Parse.Query.or(mainQuery, item);\n      } else {\n        mainQuery = Parse.Query.and(mainQuery, item.mainQuery);\n      }\n    });\n  }\n\n  props.newd.mainQuery = mainQuery;\n  const newdd = { ...props.newd\n  };\n  props.setData(newdd);\n};\n\nconst addClouse = ({\n  setData,\n  data\n}) => () => {\n  const query = new Parse.Query(ClouseQuery);\n  const newd = { ...data\n  };\n  newd.childs = newd.childs.concat(query);\n  setData(newd);\n  makeMainQuery({\n    setData,\n    newd\n  });\n};\n\nconst deleteChild = ({\n  setData,\n  data\n}) => index => {\n  const newd = { ...data\n  };\n  newd.childs = newd.childs.filter((value, i) => i !== index);\n  setData(newd);\n  makeMainQuery({\n    setData,\n    newd\n  });\n};\n\nconst changeOprand = ({\n  setData,\n  data\n}) => oprand => {\n  const newd = { ...data\n  };\n  newd.op = oprand;\n  setData(newd);\n  makeMainQuery({\n    setData,\n    newd\n  }); // setData((d) => d.set('op', oprand));\n};\n\nconst addOprand = ({\n  setData,\n  data,\n  filterData\n}) => () => {\n  const newd = { ...data\n  };\n  newd.childs = newd.childs.concat(filterData);\n  setData(newd);\n  makeMainQuery({\n    setData,\n    newd\n  }); // setData((d) => d.set('childs', d.childs.concat(Record({ op: 'and', childs: [], mainQuery: query })())));\n};\n\nconst addObject = () => () => {\n  const obj = new Parse.Object('ClouseQuery');\n  obj.save({\n    name: 'rox',\n    number: 456\n  });\n};\n\nconst oprandController = pipe(withState(init), withHandlers({\n  makeMainQuery,\n  addClouse,\n  deleteChild,\n  changeOprand,\n  addOprand,\n  addObject\n}));\nexport default oprandController;","map":{"version":3,"sources":["/home/roxana/React-Project/datafilter/src/components/oprand/oprandController.js"],"names":["Parse","withState","withHandlers","pipe","ClouseQuery","Object","extend","init","props","filterData","makeMainQuery","index","console","log","mainQuery","Query","newd","op","childs","map","item","and","or","newdd","setData","addClouse","data","query","concat","deleteChild","filter","value","i","changeOprand","oprand","addOprand","addObject","obj","save","name","number","oprandController"],"mappings":"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","sourcesContent":["\nimport Parse from 'parse';\nimport {\n  withState, withHandlers, pipe,\n} from '../../util';\n\n\nconst ClouseQuery = Parse.Object.extend('ClouseQuery');\n\nconst init = (props) => props.filterData;\n\nconst makeMainQuery = (props) => (index) => {\n  console.log(props);\n  console.log('makemain query');\n  let mainQuery = new Parse.Query(ClouseQuery);\n  if (props.newd.op === 'and') {\n    props.newd.childs.map((item) => {\n      if (!item.childs) { mainQuery = Parse.Query.and(mainQuery, item); } else {\n        mainQuery = Parse.Query.and(mainQuery, item.mainQuery);\n      }\n    });\n  } else {\n    props.newd.childs.map((item) => {\n      if (!item.childs) { mainQuery = Parse.Query.or(mainQuery, item); } else {\n        mainQuery = Parse.Query.and(mainQuery, item.mainQuery);\n      }\n    });\n  }\n  props.newd.mainQuery = mainQuery;\n  const newdd = { ...props.newd };\n  props.setData(newdd);\n};\n\nconst addClouse = ({ setData, data }) => () => {\n  const query = new Parse.Query(ClouseQuery);\n  const newd = { ...data };\n  newd.childs = newd.childs.concat(query);\n  setData(newd);\n  makeMainQuery({ setData, newd });\n};\n\nconst deleteChild = ({ setData, data }) => (index) => {\n  const newd = { ...data };\n  newd.childs = newd.childs.filter((value, i) => i !== index);\n  setData(newd);\n  makeMainQuery({ setData, newd });\n};\n\nconst changeOprand = ({ setData, data }) => (oprand) => {\n  const newd = { ...data };\n  newd.op = oprand;\n  setData(newd);\n  makeMainQuery({ setData, newd });\n\n  // setData((d) => d.set('op', oprand));\n};\n\nconst addOprand = ({ setData, data, filterData }) => () => {\n  const newd = { ...data };\n  newd.childs = newd.childs.concat(filterData);\n  setData(newd);\n  makeMainQuery({ setData, newd });\n  // setData((d) => d.set('childs', d.childs.concat(Record({ op: 'and', childs: [], mainQuery: query })())));\n};\n\n\nconst addObject = () => () => {\n  const obj = new Parse.Object('ClouseQuery');\n  obj.save({\n    name: 'rox',\n    number: 456,\n\n  });\n};\n\n\nconst oprandController = pipe(\n  withState(init),\n  withHandlers({\n    makeMainQuery,\n    addClouse,\n    deleteChild,\n    changeOprand,\n    addOprand,\n    addObject,\n  }),\n\n);\n\nexport default oprandController;\n"]},"metadata":{},"sourceType":"module"}