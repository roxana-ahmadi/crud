{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _getIterator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js/get-iterator\"));\n\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\n\nvar _reduce = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/reduce\"));\n\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _LocalDatastoreUtils = require(\"./LocalDatastoreUtils\");\n\nvar _Storage = _interopRequireDefault(require(\"./Storage\"));\n/**\n * Copyright (c) 2015-present, Parse, LLC.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @flow\n */\n\n\nvar LocalDatastoreController = {\n  fromPinWithName: function () {\n    var _fromPinWithName = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee(name\n    /*: string*/\n    ) {\n      var values, objects;\n      return _regenerator.default.wrap(function (_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _Storage.default.getItemAsync(name);\n\n            case 2:\n              values = _context.sent;\n\n              if (values) {\n                _context.next = 5;\n                break;\n              }\n\n              return _context.abrupt(\"return\", []);\n\n            case 5:\n              objects = JSON.parse(values);\n              return _context.abrupt(\"return\", objects);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function () {\n      return _fromPinWithName.apply(this, arguments);\n    };\n  }(),\n  pinWithName: function (name\n  /*: string*/\n  , value\n  /*: any*/\n  ) {\n    var values = (0, _stringify.default)(value);\n    return _Storage.default.setItemAsync(name, values);\n  },\n  unPinWithName: function (name\n  /*: string*/\n  ) {\n    return _Storage.default.removeItemAsync(name);\n  },\n  getAllContents: function () {\n    var _getAllContents = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee3() {\n      var keys;\n      return _regenerator.default.wrap(function (_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _Storage.default.getAllKeysAsync();\n\n            case 2:\n              keys = _context3.sent;\n              return _context3.abrupt(\"return\", (0, _reduce.default)(keys).call(keys,\n              /*#__PURE__*/\n              function () {\n                var _ref = (0, _asyncToGenerator2.default)(\n                /*#__PURE__*/\n                _regenerator.default.mark(function _callee2(previousPromise, key) {\n                  var LDS, value;\n                  return _regenerator.default.wrap(function (_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          _context2.next = 2;\n                          return previousPromise;\n\n                        case 2:\n                          LDS = _context2.sent;\n\n                          if (!(0, _LocalDatastoreUtils.isLocalDatastoreKey)(key)) {\n                            _context2.next = 8;\n                            break;\n                          }\n\n                          _context2.next = 6;\n                          return _Storage.default.getItemAsync(key);\n\n                        case 6:\n                          value = _context2.sent;\n\n                          try {\n                            LDS[key] = JSON.parse(value);\n                          } catch (error) {\n                            console.error('Error getAllContents: ', error);\n                          }\n\n                        case 8:\n                          return _context2.abrupt(\"return\", LDS);\n\n                        case 9:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                }));\n\n                return function () {\n                  return _ref.apply(this, arguments);\n                };\n              }(), _promise.default.resolve({})));\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function () {\n      return _getAllContents.apply(this, arguments);\n    };\n  }(),\n  // Used for testing\n  getRawStorage: function () {\n    var _getRawStorage = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee5() {\n      var keys;\n      return _regenerator.default.wrap(function (_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return _Storage.default.getAllKeysAsync();\n\n            case 2:\n              keys = _context5.sent;\n              return _context5.abrupt(\"return\", (0, _reduce.default)(keys).call(keys,\n              /*#__PURE__*/\n              function () {\n                var _ref2 = (0, _asyncToGenerator2.default)(\n                /*#__PURE__*/\n                _regenerator.default.mark(function _callee4(previousPromise, key) {\n                  var LDS, value;\n                  return _regenerator.default.wrap(function (_context4) {\n                    while (1) {\n                      switch (_context4.prev = _context4.next) {\n                        case 0:\n                          _context4.next = 2;\n                          return previousPromise;\n\n                        case 2:\n                          LDS = _context4.sent;\n                          _context4.next = 5;\n                          return _Storage.default.getItemAsync(key);\n\n                        case 5:\n                          value = _context4.sent;\n                          LDS[key] = value;\n                          return _context4.abrupt(\"return\", LDS);\n\n                        case 8:\n                        case \"end\":\n                          return _context4.stop();\n                      }\n                    }\n                  }, _callee4);\n                }));\n\n                return function () {\n                  return _ref2.apply(this, arguments);\n                };\n              }(), _promise.default.resolve({})));\n\n            case 4:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function () {\n      return _getRawStorage.apply(this, arguments);\n    };\n  }(),\n  clear: function () {\n    var _clear = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee6() {\n      var keys, toRemove, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, key, promises;\n\n      return _regenerator.default.wrap(function (_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return _Storage.default.getAllKeysAsync();\n\n            case 2:\n              keys = _context6.sent;\n              toRemove = [];\n              _iteratorNormalCompletion = true;\n              _didIteratorError = false;\n              _iteratorError = undefined;\n              _context6.prev = 7;\n\n              for (_iterator = (0, _getIterator2.default)(keys); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                key = _step.value;\n\n                if ((0, _LocalDatastoreUtils.isLocalDatastoreKey)(key)) {\n                  toRemove.push(key);\n                }\n              }\n\n              _context6.next = 15;\n              break;\n\n            case 11:\n              _context6.prev = 11;\n              _context6.t0 = _context6[\"catch\"](7);\n              _didIteratorError = true;\n              _iteratorError = _context6.t0;\n\n            case 15:\n              _context6.prev = 15;\n              _context6.prev = 16;\n\n              if (!_iteratorNormalCompletion && _iterator.return != null) {\n                _iterator.return();\n              }\n\n            case 18:\n              _context6.prev = 18;\n\n              if (!_didIteratorError) {\n                _context6.next = 21;\n                break;\n              }\n\n              throw _iteratorError;\n\n            case 21:\n              return _context6.finish(18);\n\n            case 22:\n              return _context6.finish(15);\n\n            case 23:\n              promises = (0, _map.default)(toRemove).call(toRemove, this.unPinWithName);\n              return _context6.abrupt(\"return\", _promise.default.all(promises));\n\n            case 25:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6, this, [[7, 11, 15, 23], [16,, 18, 22]]);\n    }));\n\n    return function () {\n      return _clear.apply(this, arguments);\n    };\n  }()\n};\nmodule.exports = LocalDatastoreController;","map":{"version":3,"sources":["/home/roxana/React-Project/datafilter/node_modules/parse/lib/browser/LocalDatastoreController.js"],"names":["_interopRequireDefault","require","_getIterator2","_map","_promise","_reduce","_stringify","_regenerator","_asyncToGenerator2","_LocalDatastoreUtils","_Storage","LocalDatastoreController","fromPinWithName","_fromPinWithName","default","mark","_callee","name","values","objects","wrap","_context","prev","next","getItemAsync","sent","abrupt","JSON","parse","stop","apply","arguments","pinWithName","value","setItemAsync","unPinWithName","removeItemAsync","getAllContents","_getAllContents","_callee3","keys","_context3","getAllKeysAsync","call","_ref","_callee2","previousPromise","key","LDS","_context2","isLocalDatastoreKey","error","console","resolve","getRawStorage","_getRawStorage","_callee5","_context5","_ref2","_callee4","_context4","clear","_clear","_callee6","toRemove","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","promises","_context6","undefined","done","push","t0","return","finish","all","module","exports"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _getIterator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js/get-iterator\"));\n\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\n\nvar _reduce = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/reduce\"));\n\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _LocalDatastoreUtils = require(\"./LocalDatastoreUtils\");\n\nvar _Storage = _interopRequireDefault(require(\"./Storage\"));\n/**\n * Copyright (c) 2015-present, Parse, LLC.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @flow\n */\n\n\nvar LocalDatastoreController = {\n  fromPinWithName: function () {\n    var _fromPinWithName = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee(name\n    /*: string*/\n    ) {\n      var values, objects;\n      return _regenerator.default.wrap(function (_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _Storage.default.getItemAsync(name);\n\n            case 2:\n              values = _context.sent;\n\n              if (values) {\n                _context.next = 5;\n                break;\n              }\n\n              return _context.abrupt(\"return\", []);\n\n            case 5:\n              objects = JSON.parse(values);\n              return _context.abrupt(\"return\", objects);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function () {\n      return _fromPinWithName.apply(this, arguments);\n    };\n  }(),\n  pinWithName: function (name\n  /*: string*/\n  , value\n  /*: any*/\n  ) {\n    var values = (0, _stringify.default)(value);\n    return _Storage.default.setItemAsync(name, values);\n  },\n  unPinWithName: function (name\n  /*: string*/\n  ) {\n    return _Storage.default.removeItemAsync(name);\n  },\n  getAllContents: function () {\n    var _getAllContents = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee3() {\n      var keys;\n      return _regenerator.default.wrap(function (_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _Storage.default.getAllKeysAsync();\n\n            case 2:\n              keys = _context3.sent;\n              return _context3.abrupt(\"return\", (0, _reduce.default)(keys).call(keys,\n              /*#__PURE__*/\n              function () {\n                var _ref = (0, _asyncToGenerator2.default)(\n                /*#__PURE__*/\n                _regenerator.default.mark(function _callee2(previousPromise, key) {\n                  var LDS, value;\n                  return _regenerator.default.wrap(function (_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          _context2.next = 2;\n                          return previousPromise;\n\n                        case 2:\n                          LDS = _context2.sent;\n\n                          if (!(0, _LocalDatastoreUtils.isLocalDatastoreKey)(key)) {\n                            _context2.next = 8;\n                            break;\n                          }\n\n                          _context2.next = 6;\n                          return _Storage.default.getItemAsync(key);\n\n                        case 6:\n                          value = _context2.sent;\n\n                          try {\n                            LDS[key] = JSON.parse(value);\n                          } catch (error) {\n                            console.error('Error getAllContents: ', error);\n                          }\n\n                        case 8:\n                          return _context2.abrupt(\"return\", LDS);\n\n                        case 9:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                }));\n\n                return function () {\n                  return _ref.apply(this, arguments);\n                };\n              }(), _promise.default.resolve({})));\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function () {\n      return _getAllContents.apply(this, arguments);\n    };\n  }(),\n  // Used for testing\n  getRawStorage: function () {\n    var _getRawStorage = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee5() {\n      var keys;\n      return _regenerator.default.wrap(function (_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return _Storage.default.getAllKeysAsync();\n\n            case 2:\n              keys = _context5.sent;\n              return _context5.abrupt(\"return\", (0, _reduce.default)(keys).call(keys,\n              /*#__PURE__*/\n              function () {\n                var _ref2 = (0, _asyncToGenerator2.default)(\n                /*#__PURE__*/\n                _regenerator.default.mark(function _callee4(previousPromise, key) {\n                  var LDS, value;\n                  return _regenerator.default.wrap(function (_context4) {\n                    while (1) {\n                      switch (_context4.prev = _context4.next) {\n                        case 0:\n                          _context4.next = 2;\n                          return previousPromise;\n\n                        case 2:\n                          LDS = _context4.sent;\n                          _context4.next = 5;\n                          return _Storage.default.getItemAsync(key);\n\n                        case 5:\n                          value = _context4.sent;\n                          LDS[key] = value;\n                          return _context4.abrupt(\"return\", LDS);\n\n                        case 8:\n                        case \"end\":\n                          return _context4.stop();\n                      }\n                    }\n                  }, _callee4);\n                }));\n\n                return function () {\n                  return _ref2.apply(this, arguments);\n                };\n              }(), _promise.default.resolve({})));\n\n            case 4:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function () {\n      return _getRawStorage.apply(this, arguments);\n    };\n  }(),\n  clear: function () {\n    var _clear = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee6() {\n      var keys, toRemove, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, key, promises;\n\n      return _regenerator.default.wrap(function (_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return _Storage.default.getAllKeysAsync();\n\n            case 2:\n              keys = _context6.sent;\n              toRemove = [];\n              _iteratorNormalCompletion = true;\n              _didIteratorError = false;\n              _iteratorError = undefined;\n              _context6.prev = 7;\n\n              for (_iterator = (0, _getIterator2.default)(keys); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                key = _step.value;\n\n                if ((0, _LocalDatastoreUtils.isLocalDatastoreKey)(key)) {\n                  toRemove.push(key);\n                }\n              }\n\n              _context6.next = 15;\n              break;\n\n            case 11:\n              _context6.prev = 11;\n              _context6.t0 = _context6[\"catch\"](7);\n              _didIteratorError = true;\n              _iteratorError = _context6.t0;\n\n            case 15:\n              _context6.prev = 15;\n              _context6.prev = 16;\n\n              if (!_iteratorNormalCompletion && _iterator.return != null) {\n                _iterator.return();\n              }\n\n            case 18:\n              _context6.prev = 18;\n\n              if (!_didIteratorError) {\n                _context6.next = 21;\n                break;\n              }\n\n              throw _iteratorError;\n\n            case 21:\n              return _context6.finish(18);\n\n            case 22:\n              return _context6.finish(15);\n\n            case 23:\n              promises = (0, _map.default)(toRemove).call(toRemove, this.unPinWithName);\n              return _context6.abrupt(\"return\", _promise.default.all(promises));\n\n            case 25:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6, this, [[7, 11, 15, 23], [16,, 18, 22]]);\n    }));\n\n    return function () {\n      return _clear.apply(this, arguments);\n    };\n  }()\n};\nmodule.exports = LocalDatastoreController;"]},"metadata":{},"sourceType":"script"}