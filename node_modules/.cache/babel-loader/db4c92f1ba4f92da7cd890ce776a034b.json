{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nvar _indexOf = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/index-of\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/slicedToArray\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _EventEmitter = _interopRequireDefault(require(\"./EventEmitter\"));\n\nvar _LiveQueryClient = _interopRequireDefault(require(\"./LiveQueryClient\"));\n\nvar _CoreManager = _interopRequireDefault(require(\"./CoreManager\"));\n/**\n * Copyright (c) 2015-present, Parse, LLC.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @flow\n */\n\n\nfunction getLiveQueryClient()\n/*: LiveQueryClient*/\n{\n  return _CoreManager.default.getLiveQueryController().getDefaultLiveQueryClient();\n}\n/**\n *\n * We expose three events to help you monitor the status of the WebSocket connection:\n *\n * <p>Open - When we establish the WebSocket connection to the LiveQuery server, you'll get this event.\n *\n * <pre>\n * Parse.LiveQuery.on('open', () => {\n *\n * });</pre></p>\n *\n * <p>Close - When we lose the WebSocket connection to the LiveQuery server, you'll get this event.\n *\n * <pre>\n * Parse.LiveQuery.on('close', () => {\n *\n * });</pre></p>\n *\n * <p>Error - When some network error or LiveQuery server error happens, you'll get this event.\n *\n * <pre>\n * Parse.LiveQuery.on('error', (error) => {\n *\n * });</pre></p>\n *\n * @class Parse.LiveQuery\n * @static\n *\n */\n\n\nvar LiveQuery = new _EventEmitter.default();\n/**\n * After open is called, the LiveQuery will try to send a connect request\n * to the LiveQuery server.\n */\n\nLiveQuery.open =\n/*#__PURE__*/\n(0, _asyncToGenerator2.default)(\n/*#__PURE__*/\n_regenerator.default.mark(function _callee() {\n  var liveQueryClient;\n  return _regenerator.default.wrap(function (_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return getLiveQueryClient();\n\n        case 2:\n          liveQueryClient = _context.sent;\n          return _context.abrupt(\"return\", liveQueryClient.open());\n\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _callee);\n}));\n/**\n * When you're done using LiveQuery, you can call Parse.LiveQuery.close().\n * This function will close the WebSocket connection to the LiveQuery server,\n * cancel the auto reconnect, and unsubscribe all subscriptions based on it.\n * If you call query.subscribe() after this, we'll create a new WebSocket\n * connection to the LiveQuery server.\n */\n\nLiveQuery.close =\n/*#__PURE__*/\n(0, _asyncToGenerator2.default)(\n/*#__PURE__*/\n_regenerator.default.mark(function _callee2() {\n  var liveQueryClient;\n  return _regenerator.default.wrap(function (_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return getLiveQueryClient();\n\n        case 2:\n          liveQueryClient = _context2.sent;\n          return _context2.abrupt(\"return\", liveQueryClient.close());\n\n        case 4:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _callee2);\n})); // Register a default onError callback to make sure we do not crash on error\n\nLiveQuery.on('error', function () {});\nvar _default = LiveQuery;\nexports.default = _default;\nvar defaultLiveQueryClient;\nvar DefaultLiveQueryController = {\n  setDefaultLiveQueryClient: function (liveQueryClient\n  /*: LiveQueryClient*/\n  ) {\n    defaultLiveQueryClient = liveQueryClient;\n  },\n  getDefaultLiveQueryClient: function () {\n    var _getDefaultLiveQueryClient = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee3() {\n      var _ref3, _ref4, currentUser, installationId, sessionToken, liveQueryServerURL, serverURL, protocol, host, applicationId, javascriptKey, masterKey;\n\n      return _regenerator.default.wrap(function (_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!defaultLiveQueryClient) {\n                _context3.next = 2;\n                break;\n              }\n\n              return _context3.abrupt(\"return\", defaultLiveQueryClient);\n\n            case 2:\n              _context3.next = 4;\n              return _promise.default.all([_CoreManager.default.getUserController().currentUserAsync(), _CoreManager.default.getInstallationController().currentInstallationId()]);\n\n            case 4:\n              _ref3 = _context3.sent;\n              _ref4 = (0, _slicedToArray2.default)(_ref3, 2);\n              currentUser = _ref4[0];\n              installationId = _ref4[1];\n              sessionToken = currentUser ? currentUser.getSessionToken() : undefined;\n              liveQueryServerURL = _CoreManager.default.get('LIVEQUERY_SERVER_URL');\n\n              if (!(liveQueryServerURL && (0, _indexOf.default)(liveQueryServerURL).call(liveQueryServerURL, 'ws') !== 0)) {\n                _context3.next = 12;\n                break;\n              }\n\n              throw new Error('You need to set a proper Parse LiveQuery server url before using LiveQueryClient');\n\n            case 12:\n              // If we can not find Parse.liveQueryServerURL, we try to extract it from Parse.serverURL\n              if (!liveQueryServerURL) {\n                serverURL = _CoreManager.default.get('SERVER_URL');\n                protocol = (0, _indexOf.default)(serverURL).call(serverURL, 'https') === 0 ? 'wss://' : 'ws://';\n                host = serverURL.replace(/^https?:\\/\\//, '');\n                liveQueryServerURL = protocol + host;\n\n                _CoreManager.default.set('LIVEQUERY_SERVER_URL', liveQueryServerURL);\n              }\n\n              applicationId = _CoreManager.default.get('APPLICATION_ID');\n              javascriptKey = _CoreManager.default.get('JAVASCRIPT_KEY');\n              masterKey = _CoreManager.default.get('MASTER_KEY');\n              defaultLiveQueryClient = new _LiveQueryClient.default({\n                applicationId: applicationId,\n                serverURL: liveQueryServerURL,\n                javascriptKey: javascriptKey,\n                masterKey: masterKey,\n                sessionToken: sessionToken,\n                installationId: installationId\n              });\n              defaultLiveQueryClient.on('error', function (error) {\n                LiveQuery.emit('error', error);\n              });\n              defaultLiveQueryClient.on('open', function () {\n                LiveQuery.emit('open');\n              });\n              defaultLiveQueryClient.on('close', function () {\n                LiveQuery.emit('close');\n              });\n              return _context3.abrupt(\"return\", defaultLiveQueryClient);\n\n            case 21:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function () {\n      return _getDefaultLiveQueryClient.apply(this, arguments);\n    };\n  }(),\n  _clearCachedDefaultClient: function () {\n    defaultLiveQueryClient = null;\n  }\n};\n\n_CoreManager.default.setLiveQueryController(DefaultLiveQueryController);","map":{"version":3,"sources":["/home/roxana/React-Project/crud/node_modules/parse/lib/browser/ParseLiveQuery.js"],"names":["_interopRequireDefault","require","_Object$defineProperty","exports","value","default","_indexOf","_promise","_slicedToArray2","_regenerator","_asyncToGenerator2","_EventEmitter","_LiveQueryClient","_CoreManager","getLiveQueryClient","getLiveQueryController","getDefaultLiveQueryClient","LiveQuery","open","mark","_callee","liveQueryClient","wrap","_context","prev","next","sent","abrupt","stop","close","_callee2","_context2","on","_default","defaultLiveQueryClient","DefaultLiveQueryController","setDefaultLiveQueryClient","_getDefaultLiveQueryClient","_callee3","_ref3","_ref4","currentUser","installationId","sessionToken","liveQueryServerURL","serverURL","protocol","host","applicationId","javascriptKey","masterKey","_context3","all","getUserController","currentUserAsync","getInstallationController","currentInstallationId","getSessionToken","undefined","get","call","Error","replace","set","error","emit","apply","arguments","_clearCachedDefaultClient","setLiveQueryController"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nvar _indexOf = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/index-of\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/slicedToArray\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _EventEmitter = _interopRequireDefault(require(\"./EventEmitter\"));\n\nvar _LiveQueryClient = _interopRequireDefault(require(\"./LiveQueryClient\"));\n\nvar _CoreManager = _interopRequireDefault(require(\"./CoreManager\"));\n/**\n * Copyright (c) 2015-present, Parse, LLC.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @flow\n */\n\n\nfunction getLiveQueryClient()\n/*: LiveQueryClient*/\n{\n  return _CoreManager.default.getLiveQueryController().getDefaultLiveQueryClient();\n}\n/**\n *\n * We expose three events to help you monitor the status of the WebSocket connection:\n *\n * <p>Open - When we establish the WebSocket connection to the LiveQuery server, you'll get this event.\n *\n * <pre>\n * Parse.LiveQuery.on('open', () => {\n *\n * });</pre></p>\n *\n * <p>Close - When we lose the WebSocket connection to the LiveQuery server, you'll get this event.\n *\n * <pre>\n * Parse.LiveQuery.on('close', () => {\n *\n * });</pre></p>\n *\n * <p>Error - When some network error or LiveQuery server error happens, you'll get this event.\n *\n * <pre>\n * Parse.LiveQuery.on('error', (error) => {\n *\n * });</pre></p>\n *\n * @class Parse.LiveQuery\n * @static\n *\n */\n\n\nvar LiveQuery = new _EventEmitter.default();\n/**\n * After open is called, the LiveQuery will try to send a connect request\n * to the LiveQuery server.\n */\n\nLiveQuery.open =\n/*#__PURE__*/\n(0, _asyncToGenerator2.default)(\n/*#__PURE__*/\n_regenerator.default.mark(function _callee() {\n  var liveQueryClient;\n  return _regenerator.default.wrap(function (_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return getLiveQueryClient();\n\n        case 2:\n          liveQueryClient = _context.sent;\n          return _context.abrupt(\"return\", liveQueryClient.open());\n\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _callee);\n}));\n/**\n * When you're done using LiveQuery, you can call Parse.LiveQuery.close().\n * This function will close the WebSocket connection to the LiveQuery server,\n * cancel the auto reconnect, and unsubscribe all subscriptions based on it.\n * If you call query.subscribe() after this, we'll create a new WebSocket\n * connection to the LiveQuery server.\n */\n\nLiveQuery.close =\n/*#__PURE__*/\n(0, _asyncToGenerator2.default)(\n/*#__PURE__*/\n_regenerator.default.mark(function _callee2() {\n  var liveQueryClient;\n  return _regenerator.default.wrap(function (_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return getLiveQueryClient();\n\n        case 2:\n          liveQueryClient = _context2.sent;\n          return _context2.abrupt(\"return\", liveQueryClient.close());\n\n        case 4:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _callee2);\n})); // Register a default onError callback to make sure we do not crash on error\n\nLiveQuery.on('error', function () {});\nvar _default = LiveQuery;\nexports.default = _default;\nvar defaultLiveQueryClient;\nvar DefaultLiveQueryController = {\n  setDefaultLiveQueryClient: function (liveQueryClient\n  /*: LiveQueryClient*/\n  ) {\n    defaultLiveQueryClient = liveQueryClient;\n  },\n  getDefaultLiveQueryClient: function () {\n    var _getDefaultLiveQueryClient = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee3() {\n      var _ref3, _ref4, currentUser, installationId, sessionToken, liveQueryServerURL, serverURL, protocol, host, applicationId, javascriptKey, masterKey;\n\n      return _regenerator.default.wrap(function (_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!defaultLiveQueryClient) {\n                _context3.next = 2;\n                break;\n              }\n\n              return _context3.abrupt(\"return\", defaultLiveQueryClient);\n\n            case 2:\n              _context3.next = 4;\n              return _promise.default.all([_CoreManager.default.getUserController().currentUserAsync(), _CoreManager.default.getInstallationController().currentInstallationId()]);\n\n            case 4:\n              _ref3 = _context3.sent;\n              _ref4 = (0, _slicedToArray2.default)(_ref3, 2);\n              currentUser = _ref4[0];\n              installationId = _ref4[1];\n              sessionToken = currentUser ? currentUser.getSessionToken() : undefined;\n              liveQueryServerURL = _CoreManager.default.get('LIVEQUERY_SERVER_URL');\n\n              if (!(liveQueryServerURL && (0, _indexOf.default)(liveQueryServerURL).call(liveQueryServerURL, 'ws') !== 0)) {\n                _context3.next = 12;\n                break;\n              }\n\n              throw new Error('You need to set a proper Parse LiveQuery server url before using LiveQueryClient');\n\n            case 12:\n              // If we can not find Parse.liveQueryServerURL, we try to extract it from Parse.serverURL\n              if (!liveQueryServerURL) {\n                serverURL = _CoreManager.default.get('SERVER_URL');\n                protocol = (0, _indexOf.default)(serverURL).call(serverURL, 'https') === 0 ? 'wss://' : 'ws://';\n                host = serverURL.replace(/^https?:\\/\\//, '');\n                liveQueryServerURL = protocol + host;\n\n                _CoreManager.default.set('LIVEQUERY_SERVER_URL', liveQueryServerURL);\n              }\n\n              applicationId = _CoreManager.default.get('APPLICATION_ID');\n              javascriptKey = _CoreManager.default.get('JAVASCRIPT_KEY');\n              masterKey = _CoreManager.default.get('MASTER_KEY');\n              defaultLiveQueryClient = new _LiveQueryClient.default({\n                applicationId: applicationId,\n                serverURL: liveQueryServerURL,\n                javascriptKey: javascriptKey,\n                masterKey: masterKey,\n                sessionToken: sessionToken,\n                installationId: installationId\n              });\n              defaultLiveQueryClient.on('error', function (error) {\n                LiveQuery.emit('error', error);\n              });\n              defaultLiveQueryClient.on('open', function () {\n                LiveQuery.emit('open');\n              });\n              defaultLiveQueryClient.on('close', function () {\n                LiveQuery.emit('close');\n              });\n              return _context3.abrupt(\"return\", defaultLiveQueryClient);\n\n            case 21:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function () {\n      return _getDefaultLiveQueryClient.apply(this, arguments);\n    };\n  }(),\n  _clearCachedDefaultClient: function () {\n    defaultLiveQueryClient = null;\n  }\n};\n\n_CoreManager.default.setLiveQueryController(DefaultLiveQueryController);"]},"metadata":{},"sourceType":"script"}