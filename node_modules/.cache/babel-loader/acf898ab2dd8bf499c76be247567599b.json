{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.defaultState = defaultState;\nexports.setServerData = setServerData;\nexports.setPendingOp = setPendingOp;\nexports.pushPendingState = pushPendingState;\nexports.popPendingState = popPendingState;\nexports.mergeFirstPendingState = mergeFirstPendingState;\nexports.estimateAttribute = estimateAttribute;\nexports.estimateAttributes = estimateAttributes;\nexports.commitServerChanges = commitServerChanges;\n\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/typeof\"));\n\nvar _assign = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/assign\"));\n\nvar _includes = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/includes\"));\n\nvar _encode = _interopRequireDefault(require(\"./encode\"));\n\nvar _ParseFile = _interopRequireDefault(require(\"./ParseFile\"));\n\nvar _ParseObject = _interopRequireDefault(require(\"./ParseObject\"));\n\nvar _ParseRelation = _interopRequireDefault(require(\"./ParseRelation\"));\n\nvar _TaskQueue = _interopRequireDefault(require(\"./TaskQueue\"));\n\nvar _ParseOp = require(\"./ParseOp\");\n/**\n * Copyright (c) 2015-present, Parse, LLC.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @flow\n */\n\n\nfunction defaultState()\n/*: State*/\n{\n  return {\n    serverData: {},\n    pendingOps: [{}],\n    objectCache: {},\n    tasks: new _TaskQueue.default(),\n    existed: false\n  };\n}\n\nfunction setServerData(serverData\n/*: AttributeMap*/\n, attributes\n/*: AttributeMap*/\n) {\n  for (var _attr in attributes) {\n    if (typeof attributes[_attr] !== 'undefined') {\n      serverData[_attr] = attributes[_attr];\n    } else {\n      delete serverData[_attr];\n    }\n  }\n}\n\nfunction setPendingOp(pendingOps\n/*: Array<OpsMap>*/\n, attr\n/*: string*/\n, op\n/*: ?Op*/\n) {\n  var last = pendingOps.length - 1;\n\n  if (op) {\n    pendingOps[last][attr] = op;\n  } else {\n    delete pendingOps[last][attr];\n  }\n}\n\nfunction pushPendingState(pendingOps\n/*: Array<OpsMap>*/\n) {\n  pendingOps.push({});\n}\n\nfunction popPendingState(pendingOps\n/*: Array<OpsMap>*/\n)\n/*: OpsMap*/\n{\n  var first = pendingOps.shift();\n\n  if (!pendingOps.length) {\n    pendingOps[0] = {};\n  }\n\n  return first;\n}\n\nfunction mergeFirstPendingState(pendingOps\n/*: Array<OpsMap>*/\n) {\n  var first = popPendingState(pendingOps);\n  var next = pendingOps[0];\n\n  for (var _attr2 in first) {\n    if (next[_attr2] && first[_attr2]) {\n      var merged = next[_attr2].mergeWith(first[_attr2]);\n\n      if (merged) {\n        next[_attr2] = merged;\n      }\n    } else {\n      next[_attr2] = first[_attr2];\n    }\n  }\n}\n\nfunction estimateAttribute(serverData\n/*: AttributeMap*/\n, pendingOps\n/*: Array<OpsMap>*/\n, className\n/*: string*/\n, id\n/*: ?string*/\n, attr\n/*: string*/\n)\n/*: mixed*/\n{\n  var value = serverData[attr];\n\n  for (var i = 0; i < pendingOps.length; i++) {\n    if (pendingOps[i][attr]) {\n      if (pendingOps[i][attr] instanceof _ParseOp.RelationOp) {\n        if (id) {\n          value = pendingOps[i][attr].applyTo(value, {\n            className: className,\n            id: id\n          }, attr);\n        }\n      } else {\n        value = pendingOps[i][attr].applyTo(value);\n      }\n    }\n  }\n\n  return value;\n}\n\nfunction estimateAttributes(serverData\n/*: AttributeMap*/\n, pendingOps\n/*: Array<OpsMap>*/\n, className\n/*: string*/\n, id\n/*: ?string*/\n)\n/*: AttributeMap*/\n{\n  var data = {};\n\n  for (var attr in serverData) {\n    data[attr] = serverData[attr];\n  }\n\n  for (var i = 0; i < pendingOps.length; i++) {\n    for (attr in pendingOps[i]) {\n      if (pendingOps[i][attr] instanceof _ParseOp.RelationOp) {\n        if (id) {\n          data[attr] = pendingOps[i][attr].applyTo(data[attr], {\n            className: className,\n            id: id\n          }, attr);\n        }\n      } else {\n        if ((0, _includes.default)(attr).call(attr, '.')) {\n          // convert a.b.c into { a: { b: { c: value } } }\n          var fields = attr.split('.');\n          var last = fields[fields.length - 1];\n          var object = (0, _assign.default)({}, data);\n\n          for (var _i = 0; _i < fields.length - 1; _i++) {\n            object = object[fields[_i]];\n          }\n\n          object[last] = pendingOps[i][attr].applyTo(object[last]);\n        } else {\n          data[attr] = pendingOps[i][attr].applyTo(data[attr]);\n        }\n      }\n    }\n  }\n\n  return data;\n}\n\nfunction commitServerChanges(serverData\n/*: AttributeMap*/\n, objectCache\n/*: ObjectCache*/\n, changes\n/*: AttributeMap*/\n) {\n  for (var _attr3 in changes) {\n    var val = changes[_attr3];\n    serverData[_attr3] = val;\n\n    if (val && (0, _typeof2.default)(val) === 'object' && !(val instanceof _ParseObject.default) && !(val instanceof _ParseFile.default) && !(val instanceof _ParseRelation.default)) {\n      var json = (0, _encode.default)(val, false, true);\n      objectCache[_attr3] = (0, _stringify.default)(json);\n    }\n  }\n}","map":{"version":3,"sources":["/home/roxana/React-Project/datafilter/node_modules/parse/lib/browser/ObjectStateMutations.js"],"names":["_interopRequireDefault","require","_Object$defineProperty","exports","value","defaultState","setServerData","setPendingOp","pushPendingState","popPendingState","mergeFirstPendingState","estimateAttribute","estimateAttributes","commitServerChanges","_stringify","_typeof2","_assign","_includes","_encode","_ParseFile","_ParseObject","_ParseRelation","_TaskQueue","_ParseOp","serverData","pendingOps","objectCache","tasks","default","existed","attributes","_attr","attr","op","last","length","push","first","shift","next","_attr2","merged","mergeWith","className","id","i","RelationOp","applyTo","data","call","fields","split","object","_i","changes","_attr3","val","json"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.defaultState = defaultState;\nexports.setServerData = setServerData;\nexports.setPendingOp = setPendingOp;\nexports.pushPendingState = pushPendingState;\nexports.popPendingState = popPendingState;\nexports.mergeFirstPendingState = mergeFirstPendingState;\nexports.estimateAttribute = estimateAttribute;\nexports.estimateAttributes = estimateAttributes;\nexports.commitServerChanges = commitServerChanges;\n\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/typeof\"));\n\nvar _assign = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/assign\"));\n\nvar _includes = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/includes\"));\n\nvar _encode = _interopRequireDefault(require(\"./encode\"));\n\nvar _ParseFile = _interopRequireDefault(require(\"./ParseFile\"));\n\nvar _ParseObject = _interopRequireDefault(require(\"./ParseObject\"));\n\nvar _ParseRelation = _interopRequireDefault(require(\"./ParseRelation\"));\n\nvar _TaskQueue = _interopRequireDefault(require(\"./TaskQueue\"));\n\nvar _ParseOp = require(\"./ParseOp\");\n/**\n * Copyright (c) 2015-present, Parse, LLC.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @flow\n */\n\n\nfunction defaultState()\n/*: State*/\n{\n  return {\n    serverData: {},\n    pendingOps: [{}],\n    objectCache: {},\n    tasks: new _TaskQueue.default(),\n    existed: false\n  };\n}\n\nfunction setServerData(serverData\n/*: AttributeMap*/\n, attributes\n/*: AttributeMap*/\n) {\n  for (var _attr in attributes) {\n    if (typeof attributes[_attr] !== 'undefined') {\n      serverData[_attr] = attributes[_attr];\n    } else {\n      delete serverData[_attr];\n    }\n  }\n}\n\nfunction setPendingOp(pendingOps\n/*: Array<OpsMap>*/\n, attr\n/*: string*/\n, op\n/*: ?Op*/\n) {\n  var last = pendingOps.length - 1;\n\n  if (op) {\n    pendingOps[last][attr] = op;\n  } else {\n    delete pendingOps[last][attr];\n  }\n}\n\nfunction pushPendingState(pendingOps\n/*: Array<OpsMap>*/\n) {\n  pendingOps.push({});\n}\n\nfunction popPendingState(pendingOps\n/*: Array<OpsMap>*/\n)\n/*: OpsMap*/\n{\n  var first = pendingOps.shift();\n\n  if (!pendingOps.length) {\n    pendingOps[0] = {};\n  }\n\n  return first;\n}\n\nfunction mergeFirstPendingState(pendingOps\n/*: Array<OpsMap>*/\n) {\n  var first = popPendingState(pendingOps);\n  var next = pendingOps[0];\n\n  for (var _attr2 in first) {\n    if (next[_attr2] && first[_attr2]) {\n      var merged = next[_attr2].mergeWith(first[_attr2]);\n\n      if (merged) {\n        next[_attr2] = merged;\n      }\n    } else {\n      next[_attr2] = first[_attr2];\n    }\n  }\n}\n\nfunction estimateAttribute(serverData\n/*: AttributeMap*/\n, pendingOps\n/*: Array<OpsMap>*/\n, className\n/*: string*/\n, id\n/*: ?string*/\n, attr\n/*: string*/\n)\n/*: mixed*/\n{\n  var value = serverData[attr];\n\n  for (var i = 0; i < pendingOps.length; i++) {\n    if (pendingOps[i][attr]) {\n      if (pendingOps[i][attr] instanceof _ParseOp.RelationOp) {\n        if (id) {\n          value = pendingOps[i][attr].applyTo(value, {\n            className: className,\n            id: id\n          }, attr);\n        }\n      } else {\n        value = pendingOps[i][attr].applyTo(value);\n      }\n    }\n  }\n\n  return value;\n}\n\nfunction estimateAttributes(serverData\n/*: AttributeMap*/\n, pendingOps\n/*: Array<OpsMap>*/\n, className\n/*: string*/\n, id\n/*: ?string*/\n)\n/*: AttributeMap*/\n{\n  var data = {};\n\n  for (var attr in serverData) {\n    data[attr] = serverData[attr];\n  }\n\n  for (var i = 0; i < pendingOps.length; i++) {\n    for (attr in pendingOps[i]) {\n      if (pendingOps[i][attr] instanceof _ParseOp.RelationOp) {\n        if (id) {\n          data[attr] = pendingOps[i][attr].applyTo(data[attr], {\n            className: className,\n            id: id\n          }, attr);\n        }\n      } else {\n        if ((0, _includes.default)(attr).call(attr, '.')) {\n          // convert a.b.c into { a: { b: { c: value } } }\n          var fields = attr.split('.');\n          var last = fields[fields.length - 1];\n          var object = (0, _assign.default)({}, data);\n\n          for (var _i = 0; _i < fields.length - 1; _i++) {\n            object = object[fields[_i]];\n          }\n\n          object[last] = pendingOps[i][attr].applyTo(object[last]);\n        } else {\n          data[attr] = pendingOps[i][attr].applyTo(data[attr]);\n        }\n      }\n    }\n  }\n\n  return data;\n}\n\nfunction commitServerChanges(serverData\n/*: AttributeMap*/\n, objectCache\n/*: ObjectCache*/\n, changes\n/*: AttributeMap*/\n) {\n  for (var _attr3 in changes) {\n    var val = changes[_attr3];\n    serverData[_attr3] = val;\n\n    if (val && (0, _typeof2.default)(val) === 'object' && !(val instanceof _ParseObject.default) && !(val instanceof _ParseFile.default) && !(val instanceof _ParseRelation.default)) {\n      var json = (0, _encode.default)(val, false, true);\n      objectCache[_attr3] = (0, _stringify.default)(json);\n    }\n  }\n}"]},"metadata":{},"sourceType":"script"}